<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ü—ñ—ó</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script defer>
        document.addEventListener("DOMContentLoaded", function () {
            let cart = {};
            const cartCounter = document.getElementById("cart-counter");
            const cartModalBody = document.getElementById("cart-modal-body");
            const cartTotal = document.getElementById("cart-total");
            const discountMessage = document.getElementById("discount-message");
            
            document.querySelectorAll(".product input").forEach(input => {
                input.addEventListener("input", function () {
                    const productId = this.dataset.id;
                    const productName = this.dataset.name;
                    const productPrice = parseFloat(this.dataset.price);
                    const quantity = parseInt(this.value) || 0;
                    
                    if (quantity > 0) {
                        let totalPrice = productPrice * quantity;
                        let discount = 0;
                        
                        if (quantity > 50) {
                            discount = totalPrice * 0.1;
                            totalPrice -= discount;
                        }

                        cart[productId] = {
                            name: productName,
                            price: productPrice,
                            quantity: quantity,
                            total: totalPrice,
                            discount: discount
                        };
                    } else {
                        delete cart[productId];
                    }
                    updateCart();
                });
            });
            
            function updateCart() {
                let totalItems = 0, totalPrice = 0;
                cartModalBody.innerHTML = "";
                
                Object.values(cart).forEach(item => {
                    totalItems += item.quantity;
                    totalPrice += item.total;
                    let discountText = item.discount > 0 ? `<p class='text-success'>–ó–Ω–∏–∂–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä: -${item.discount.toFixed(2)} –≥—Ä–Ω</p>` : "";
                    cartModalBody.innerHTML += `<p>${item.name} - ${item.quantity} —à—Ç. (${item.total.toFixed(2)} –≥—Ä–Ω)</p>${discountText}`;
                });

                // if (totalItems >= 40) {
                //     discountMessage.innerHTML = `<p class='text-warning'>–î–æ–∫—É–ø—ñ—Ç—å —â–µ ${50 - totalItems} —à—Ç. –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∏–∂–∫–∏ 10%</p>`;
                // } else {
                //     discountMessage.innerHTML = "";
                // }
                
                if (totalPrice > 3000) {
                    const discount = totalPrice * 0.1;
                    totalPrice -= discount;
                    cartModalBody.innerHTML += `<p class='text-success'>–ó–Ω–∏–∂–∫–∞ 10%: -${discount.toFixed(2)} –≥—Ä–Ω</p>`;
                } else if (totalPrice > 2700) {
                    cartModalBody.innerHTML += `<p class='text-warning'>–î–æ–∫—É–ø—ñ—Ç—å —â–µ ${3000 - totalPrice} –≥—Ä–Ω –¥–ª—è –∑–Ω–∏–∂–∫–∏ 10%</p>`;
                }
                
                cartTotal.innerText = `–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: ${totalPrice.toFixed(2)} –≥—Ä–Ω`;
                cartCounter.innerText = totalItems;
            }
        });
    </script>
</head>
<body class="p-3">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center">
            <h2>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ü—ñ—ó</h2>
            <button class="btn btn-warning position-relative" data-bs-toggle="modal" data-bs-target="#cartModal">
                üõí –ö–æ—Ä–∑–∏–Ω–∞ <span id="cart-counter" class="badge bg-danger">0</span>
            </button>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-4 product">
                <div class="card">
                    <img src="https://www.chaipotutory.com.ua/images/foto/tea1.jpg" class="card-img-top" alt="–ß–∞–π 1">
                    <div class="card-body">
                        <h5 class="card-title">–†–∞–Ω–æ–∫ —Å—Ä—ñ–±–Ω–æ—Å–≤—ñ—Ç–Ω–∏–π</h5>
                        <p class="card-text">–¶—ñ–Ω–∞: 87 –≥—Ä–Ω</p>
                        <input type="number" min="0" class="form-control" data-id="tea1" data-name="–†–∞–Ω–æ–∫ —Å—Ä—ñ–±–Ω–æ—Å–≤—ñ—Ç–Ω–∏–π" data-price="87">
                    </div>
                </div>
            </div>
        
            <div class="col-md-4 product">
                <div class="card">
                    <img src="https://www.chaipotutory.com.ua/images/foto/tea2.jpg" class="card-img-top" alt="–ß–∞–π 2">
                    <div class="card-body">
                        <h5 class="card-title">–í–µ—á—ñ—Ä –∑–æ–ª–æ—Ç–∏–π</h5>
                        <p class="card-text">–¶—ñ–Ω–∞: 88 –≥—Ä–Ω</p>
                        <input type="number" min="0" class="form-control" data-id="tea2" data-name="–í–µ—á—ñ—Ä –∑–æ–ª–æ—Ç–∏–π" data-price="88">
                    </div>
                </div>
            </div>
        
            <div class="col-md-4 product">
                <div class="card">
                    <img src="https://www.chaipotutory.com.ua/images/foto/tea3.jpg" class="card-img-top" alt="–ß–∞–π 3">
                    <div class="card-body">
                        <h5 class="card-title">–ö–≤—ñ—Ç–∫–∞</h5>
                        <p class="card-text">–¶—ñ–Ω–∞: 96 –≥—Ä–Ω</p>
                        <input type="number" min="0" class="form-control" data-id="tea3" data-name="–ö–≤—ñ—Ç–∫–∞" data-price="96">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–ö–æ—Ä–∑–∏–Ω–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cart-modal-body"></div>
                    <div id="discount-message"></div>
                </div>
                <div class="modal-footer">
                    <h5 id="cart-total">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: 0 –≥—Ä–Ω</h5>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
